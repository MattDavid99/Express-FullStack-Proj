const path = require('path')

const express = require('express')
const { text } = require('express')
const { Template } = require('ejs')
const app = express()


// serve up static files
app.use(express.static('public'))
app.use(express.json())
app.use(express.urlencoded())

// ⬇️ takes a {key: value}
app.set('view engine', 'ejs')
app.set('views', path.join(__dirname, 'views'))


// 4. We pass that res.render() 2 things:
//  -- the file we want to use
//  -- the data we want to send to that file
// 5. Express uses that node module for our specified view engine and parses the file.
//  -- that means, it takes the HTML/CSS and combines it with whatever "node" there is in the file.
// 6. The final result if this process is a compiled product of things the browser can read.
//  -- HTML, JS, CSS

function validateUser(req, res, next) {
    // .... validated logic
    res.locals.validated = true
    next()
}

app.use(validateUser)

app.get('/', (req, res, next) => {
    // the data in the 2 arg is going to be append to res.locals()
    res.render("index", {
        msg: "Success!",
        msg2: "Fail!",
        // HTML came from the dataBase and we want to drop it in the Template
        html: `<p><img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHCBYWFRgWFhYYGBgaGh4ZGRgcHRwZHBoaGRoZGh0eHBwcIS4lHB4rHxoYJjgmKy8xNTU1GiQ7QDs0Py40NTEBDAwMEA8QHxISHzQrJSw/NDQ0NDQ0NDQ0NDo0NTY0NjQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NP/AABEIAMABBwMBIgACEQEDEQH/xAAbAAACAwEBAQAAAAAAAAAAAAAAAwECBAUGB//EADsQAAEDAgMECQIFAgYDAAAAAAEAAhEDIQQSMUFRYZEFEyIyUnGBobHR8AYUQsHhYvEjM0OCotIVcsL/xAAZAQADAQEBAAAAAAAAAAAAAAAAAgMBBAX/xAAnEQACAgICAQQCAgMAAAAAAAAAAQIRAyESMUEEEzJRImFxgTOR8f/aAAwDAQACEQMRAD8A+gVHVb9X1MQCzNlIIyMsQCHTmFTaNW63AkuxAcbUC2XESBYZWlo74m5cP9o0mRel3W+Q+FdMsao5ve/QioK4yZTSJ6tucHq46zMC4DblIJbNsoAIzE2A/EeGgbH9ItElls+pkA9qAQImTGhhg+aG2MLHFItGSkkxGJ6/OHN6ktyiWHIe0B2iDYmS82JH+U3xFVBxAJMYd3CAAIc6R3pgsywdhsRFxuQlpFaM9E1i8BwoBgcczmgAuAu2AXGJ0I4gg6gKwwxAyhxoOkNLnFrbOJbmaMrmyAM0GNouVtQikFGbCB5aG1hSJAaMzcsud28xsdLMMwNTYQm9W3wjkExQspAkU6tvhHII6tvhHIK6EUjSnVt8I5BHVt8I5BXQikBTq2+Ecgjq2+EcgrpdasGxPE+g1/sikBPVt8I5BHVt8I5BJ/Os46TpsTKFcP0nZ7opAW6tvhHII6tvhHIK6EUgKdW3wjkEdW3wjkFdCKQFOrb4RyCq6g3cOQ+iahbSMaTVMz9UNIA9BsTerb4W8groWun4FjBRVIp1bfCOQR1bfCOQV0JaQ5Tq2+Ecgjq2+EcgrqH6I4ox6FNptJnKOQVnUhsa3kPor027grELW48qEitUzDi6bQw2GzYN4UJ+OHYPp8hCWTVk3iVkUu63yHwpe/KCTsUUu63yHwq1QSQNmp9F1LpHGOYJjZK5/RPSjcQ17m/oqOZvnKeyfUQea2OpkuEPLb7IO2+vBJ/L08KxzzkZTBBdlY1l5yizQAdQFzZZuM19FYpta6FPxjxjRRDH9Wac58pyipJPe07ojXVdU0zuSW4dg0YeBvHpewR+WYbZH83f9lzKckdMXJDEJrWAQALD1+fNAYFRZftFOQpC5vR3SjauIxFAf6RbB1kEdqeIdIXULDwTrJF+TFNNWiqFOU7kR58k3JfY1kIRKJWmghCEAShRKJRYAhUq1GtBc4hoGpNgNiYgCEKlaqGiSQJIAkxJJgBLFfh7plFvonLJGLpsehAKEo4IQhBoIQhAAoc2VKEAMpm3qh7ZuEMYCLibn6Lj/iDHvoGj1bHOzVAH5Wl0MiDJGlyD6LmbqVolKSjtmnHP7B9PkKUY27HenyELoyR2iHuOWy1Lut8h8JdAS5z9hsOOl/JMpd1vkPhXAXTHo5xlFknyWTpvo44hhpO7hgmHFriQZ1ykRoujRbA87q8Lz80uUn9HXCK40zJh2PY1rBkIa0NkuJNrXMXtHrK0Uy6O1APCSPdWLQoyhTHSokff36qCLEaeWvohoUnVAxnp4QNMhzp1Ol/OBdaUKj6YdrsQKlRdCV1DePNMY2BCBiVAFgpXEwGLquxNem9j+pDW5HkENloAeA7bJM+iLoVyqjtQOCIHBU6lu6/3PyoNBu75QMM2qSFBH7Kmd3h9wgDk/iHAur0X0gHskjtgNfIaQbDMIkxyW3DgtYA/N2WgFxDe0QANATrqtIe7w+4VKtIu2+Q+qeHy26JytW49nnPxDSfXaxrC5mR7XTkJJiYiDv8A2XQY6SYa5p4ggFdOjQy3OvsqVKU/pjiD8yumOaMZa6Od4ZS/J9mRj4OkH25raCkucwCAJ3mf3S6rXC4aQNwJKo3yfVfz5Hxz9tNPf8eDUhYhBTaTyDH2EODSKwzqTqjQhCW99wL8T9FMvKSirY5rCUNAmI2TKclVG3BH3sP3wXLKbYjbCkYB8z7ErHWoMeS5zbnidi1wS023n3lZ8yv6eMXbZz5m9ITiGBtMgCBb5CFOL7h9PkKVTJ2Tj0Wpd1vkPhOptkhJpd1vkPhLPSDGV6dImHVGuLf9kGPW/JPOXGFmRrkrOoqOpkmQ4iyR0i15pPFOC8scGXy9oiBfYsnQ9OuyhTZULA9rQ10y7u2BkG5iF597OvluqOixjtrp4QExxSC18i7I22Pteyc5AEqCh7ARB0VG0Wi4CBgq0g+JJHkSNd8Lj9C45mINUBz5p1HMs9xlo0dPGDou3lHBcL8P13GrimGkWNFSWOydWHNjLrAzXBM37yx9k5PaO4yAAJ03mT6yrIRC0YCs7sGw3LWztt/Kc8CClYnEtYx73ODWtBLna5YuZ+iAdeSDgmaZG8t8A7eA5KWYRgIIa0EaGP5UtzGDmEeWqId4hyRRtIa6VKhkxdDdAg0lyAhVdMGP7fVAFkjE6eevlqVcNd4hyVKshrpM+iaHyQkvizLhKWYuJOh+/groPiDOkX8lhwDokRcyR6StTsxEFoPqreob50+ieFLjo55ZtuP3+q2oxDQQ0GxnT9vhJqVwLK6k8iTSNxqOK3J6Ic17jAsFelggLkyr4Zh7xngFouoZMrT4pmqKl+Tv+ygD97eRUOaYvv8A02OivHmqVHkBQSt0O3Qmq9oFySdgJI+Ukb8g9CExxnefNQ0bhC7sWJRVvs5pzctCcSTkdIjT5CFOL7h9PkKVmTsyPRLO6Isco+FnHRIe9lV+Rz2d1xa6RtEQ+Np2LTS7rfIfC00RY3g6TuslzK8f+jcaTlsz9K478vh31XQ4saSNgLiYaOZAWjDYhtRjHt7r2hw8nAFUqYTOC1787Tq1zWEcLEKGYQtAa15a0CwDWADQCBEBcW7Ojd/o1ZUQVKFo5E8EZgpUNQAurSa67hMTCr+TZAGUW89sfQck1wCsCgykIaHCwa2BpfYrZn7gmoQaKr1WsEumDawJ+F5el0a91PE061aG16mdpY1xLQTLhDm7QAPQr1jlZY1YjjfZzsNgcrGN6yoQ1rQDpOUAAxHAStVKnlntPdPi2cgrvfGw+glV68bncltGpJDMwUNFtfhS10iflDdyBghBaquYSbOI9ArMEC5nigADlWoJaRGxWS6z3jutDvN2WPa61OnYr6MOBrtdUc0OGZkZhuzCR7LpZlxcD0W6nXq1xmLqkBzC5uUAboaLgAazqusxzj3mhu6HZp2bhCaeRzdtCYo8VTKYlriRA9bTf4XFpY0NxowzhOannnWHzMbu6F2sTSBMw4/+ri3hs81FPCt17Y2QXO+v3C33ZceK0Y4W7HuBIEGPSVXK/eOSXQw7WXbm9XEi8bzrb7lNJKmUIAdtIjbaFSu2W2JG7Ty2+qrWLmydRIJ3x9Ep4Ju1wg7I9FXHG5IWUqTKlh8R9ldVaDtIPpCsvROMTjO4fT5ClRjO4fT5Clc2X5FI9FqXdb5D4T6L4PnZIpd1vkPhMY6DKpNcoUZF1KzYsxxLOsNORnyB8bcpJaDzEIOJkuawtc9hbnaTGUOEibWsuY7owjEfmnEghmRwzjIGAXtkm1zqvNbOpyfg7D3QNp8rqnXcHclyuiunOvpCo0sbMgtcTIIcRqOABXYo1Q4WcDGsGRK1M2MlLaOX+IsXVZh3votc6p2Q0NaXkdoTIHAHmujhqhcxjiCMzWug6iRMHyUVMOwDNkHnF7mP3WXOwXpgCx/Q42vMaboWC7Ts3B3Ec1Lm2XObiO01uZmZ05QWPGYgZjGZ1yAJ9QsTumGOxFKiHZjUY+XNc4CWOIAy7Jh9+COQOaR3g1ZelMQaVF9QTLGOcNTcAwI23hRTxrQ59NmZ7mRnEyQHjMLk3VjUfrlf5ANnU7zw91tjXa0ZOiMVUr0WVQWjO0EggyHCzvTMCt5bU8TI4tP1UMe+RIfcxcNAHEkErQ7QoBLXZSkH/qLTuygj5PkmKMqMo3IAlQ4oyjcjKNyBgui6GqUAVMxbVUAfvbyK5/4g6WGGpioQDL2Mjg53aI3kNDiuoDIkaFFi8ldFXsnaR5GNf7KOri8u9TZXG1QLoGJzDeqveN4hXUFACmPvdzT5aridNVKr34d1EiGVM75JHZjLliO1IL+QXfA3BVewbyDwKGrFatULGIY6wMkyNHDSeCSAtbWRvPmUh8bBG+0DVXwSqVMllTqyiEIXecwnGdw+nyFKjGdw+nyFK5svyKR6JY+Gs4wPZTUJAsJ9YslkWZ6HXh76p6uvihGc/o7o97K9Wv23GrAc0uaGty6RGsC3qtPTlJ1SjUotDmlzcufLmbBidCDpIWzDu1umPe4aNn7H36LzckKk0dMEnGvs803GjCDCUC1oL3FjyGBuaAGh0De4sk8F6kLE+gTeH6zAeQJ4AJowonNmeLzGYx5RuSJUMouI97o102+l15en0jiG08Y9zHWcXUNHmHDK0BrSbAgH1K9ORIvEHZ57OK4v4irVGdUKVNzw6oOsaxsgsEyHQNsz6FYzJ9XYmngDiRhsQ9z6T2NzdXAb2nQHSDe8e60dEdCswrDmdnIc5+dzW5miJMHYLE+pXT/Jsv2G319Z+pWXFdHBwLQ1ga5pa7vB3aDgYINtUUHCt1szdE4Cg9zsUwvd+YaC4OMiLECItEREq/TeIp4aiarmSGlrYk3l4G+8Ak+ib0f0e6hTFOlkDG6Alzrm7rm8SStWKwjKjctRjHtmcrmhwkbYO25RWjUnVLsTRIBBawQdHZ57LtDB3p7HvPeZlEG+YH4UnDMt2GGBA7IsAIA8oVgIEAAbI+wmGSYxVe0nQwpzeXNEoGKBjp73sExRfhz/AIRdAANqU95IIhw2SNfRM2/x5qZ4IAxPwYeIe55GsPDCJ0sC0p7aMHvv4C0aREAaJygGUULSKdYyTLmg7iRbSJHlC4vROKqOr4kVJazODSJc2C0DKcoB07Id6rsVKQmcgdxMT7oDAP8ATH/FZRjTbTBkE2eXRxB+9PlNlY+kXFlGo6kyX5DlawAnPFrDWCZUdDV3voU3VGlrywZ2mxzCx8piVtm8t0a3PAsTfVAqt3+ygVfuD87EdcOPI/RAxZtVpsClVnmY2Jr3wOKyrpwQt8mQyypUCEIXacwnGdw+nyFKjGdw+nyFK5svyKR6FuHc3/wJ++Ke94GpA8zCimOy3yHwpcwHUA+YlXXSJs5HTVernodSA5oqZqkPaBkjLBk37xPou7RxTdMwPkZSerb4W8gobTaNGgeQAUpYuV3/AMNjJxdo6EqragIkXB2i4KyvxBylrQ7NEAxIBvE3vFisH4ewz8PQbTfmeQXEODYgFxMEEyLyfULhkuMqOzltHXcwOEOExvSxh6cEZWjePLetACp1TdwWDUKbTYwOc1oEAkxcwLxby0WD8M9Ivr0Q+o0teHOa4EFuhkEA8CF0K1AEWaCZBAki44jgSlUMN2pLA2NDnLvK33os8itPlo2IS3vIPdJ4hQah8B9tw/kLRxqgbfvYFDHzsIUhAEqsGLbgrKBZACwx/iHJXYDtM+kKcyklAEHX74Khc7YAR5qxuuPh+mA/GVMNbsMa8Hbm1cD6OZ7ouhW0qs67HGbiPWVIPBQWqcqBibo9VXLdSWoAxuwpLi7JTN5BObNvk+t4U08JcFzGWvbNNvNast/v73Khe3SQihaQvH1y1jg3/MLHZAZjNFpIBMTGxc/8MuezD06dVwL2gtBAcQWg9ntEboXVDwbAiUqq4m2z+yaGNyloST4uyHukykvqEGzSePymAIXpRSSo5W7dihVM9wo60+ApqExgnFH/AAzs0+QhGM7h9PkKVzZfkUj0RTqdkWOg3bvNX63gfb6pNPujyHwrLpS0iDkxnW8D7fVBf/S6+mn1VcZj6dBrHuH+ZUZTmdC/aZ2CLpOP6YDMSzDdmX03OkyYIIyggbCA/kFyT9Uk6SLqCS2zQ2twPt9VYVx4T7fVZ3Gf1sE6Rm2ROu24TGMkS243/wB08ZY5jKWWKpKzbTrAidE5YKEi3E/X908OMR9+m5Qnhp/idEfyjZXAY1lVpcwyA5zPVji0/E+RC0DVcXofo78sxzKbQA52YlznOJcQATyC6uexveNk6xsnioqEvKBXW1scub0H0u3Ese5tsj3sI4NPZPq2DzTRTd43m0XI3a91UwuEZRa5zABaSxrGNzOAmwaBLoCyUZLsGpJp+DQ7E9otaMxbAdDmjKSJAM8I5q1Go4m7C0XuS07bCxXl/wAIYGq7ra2ILg+o6HU3MLCCywdrcZXRpzXp6WGY0yGtkbRqJlKnasSLbVj0IBVS8TEpipZAChrgdDKlAEOCQcL/AFPHHNP7LQljN/T7oMoW3DkEnO87IJkDiOKZ1Z8R9kCdsen8q8oMKBmwkn2+FAoN48ymFQX8QFuwBrYgD71U5RuUC+34RN4m6KAkNA3BZCtcLK5kW++Puuj0zXJonmWiqEIXacoIQhACcZ3D6fIUqMZ3D6fIUrmy/IpHoXT7o8grtcdjgP8Abm/eQqUtG+QW9wY0AnKBvd/KbNNKKTFxRbdo5+O6HZUYA/K4NOYAtNnTsGaxiAtjXMs5zQXj9WUSL7DqNU78yywztvEXF50jfquX+IW4kmh+XaXZagfU7TW9kCI7REyHHkuBvydTSStI64daR5pAQ6jAnO+BvI9zEozDeFbD5KxFv15Hkf7JqW/Yfu9/2VmHYulr8UxYtKTX3sshCEhUFV7AdQDwKshY0mqZjVh+Rp+BvLdopOEZ4G8ll6VxTmUKjmAl4YcgaC45ohvZGtyFPRmMfUose5pY5zQXNcIIdobHS8rm4PlRKlfE1U8OxplrWg7wN6u5jTqAUMfPmrrGmnTNqirQBorShCw0FA2pFSoZsUvMd5Vo4JSVkZZYp0ay6FR8zYjyKzFXfUJT+xJNUZ70WVc8nb9FCklQuqMUl0Qk7ZIcRoiVCEcUFs00XzqisyRxCTTN42Gx99E00v6nc1xZFwno6YvlHZnQmVWwUqV2xkpRTRzONOiUJT2XBBuPcblNGpmG4jUblpjVFcZ3D6fIUqMZ3D6fIUqGX5Dx6F0+6PIfC2UajSAHXPETqsdLQeQ+Ex1QMGYAvO4DT02p8kVKNE8cnF34MPSvSL21sP1TC9he9tVzWyBEMAcQLZXX9FOA6ez4ivRIBDMuVwtIgB/nDlj6HwTqbXse57+se58luQNLru0cdSuj+WGkv0jvE7Zm+1Rx+nbSb/tGvPK7RTpepWdXoCmwvpdrrrtiHQBmBM210T3YPTs0529kwdmzhCWykG3k6RdxPysOEx1T8zVzj/ByNyOzNiWAyQJtOYk6d1bLF7f7srjzq6l5O45kAQAIiw03fuoVswIMEHyvdVeQPJUg/BXMtKSGNNlKQKg3pnWN3olFplIZItWXQoa8HQqKhIBgSYsOOxIUTvorUotcQSLjQ3tp9Aq08KxpBa2I89qo2u/aw7OR38RdXpVHEwWRbXjpuRSCkPBTmulIVqZv5qeSNqzJIc4xdZHvJ+m5aKo7JWVN6eCdtnLmk1oEIQuw5wQhKdUdsYdYG5ADUJRqO2MO7WN/8e6BVPgPt9/2WUA1CELQIhPov2E+Sy1KLDdwB4rJg2UarGvYJY9tjeY032NlHJHkuI0ZuLM2C/ElOvWbTZoaZeDN8weWlpGywB9V2FzsL0NSpACk3JBJkXJmB3nSYtotjKRBnO48DEfCMUZRjxZltu2MSqlM94d4e43FNCFQ16dCcSeyZ1gfIQpxR7DvT5CFGb2MlopT7o8h8KyyMxQiMrrDXswY3X2qwxgt2Xe1vddEXGls53FjX1QDB+CoGIbE31jRDKwIk24EifYq3WN3jmE3KJlFRUa62vCD+4U9S3wt3aDQ6q3WN8Q5hHWN8Q5hY3FhTHYaB2QIEzsGy/nsU1R2RwMfskNqNnvDmN6tVqtgw4a7+EqFJS0dkZ3jaYSuN0/jWUGteZ7T2tPacLEy6ADrA+Fr/MMJ/TycL+qHYpoaR2SQDAh0F0GNmnFPNpxdNHJ2b8HTDSYm42kny1Wtef8Aww57KAbUIL25gIMyJBFz5wuo3Hf0nmPv7Cg5J76PR9P/AI0bELEekRbsPvb9O6fFb7Cucb/Sdm1s3EnbFvNZaLmpCx/nx4H/APD/ALI/8gL9h/8AxP8A9ItAbZO9JCV+baTEEbMxyx8z7K/Wt8TeYVcfFWzk9R4SLIVOtb4hzCOtb4hzCpyX2c1F0KnWt8Q5hHWt8Q5hHJfYUXQqda3xDmEda3xDmEcl9hRdCp1rfEOYR1rfEOYRyX2FC8TTc4ObIDXNLZBIcJaRI9Vj6MwBw7BTYG5QSe04kifS910Q9vibzCBXbvHMKcmrtdlI4r3J0SCpR+YbvHMKj6g1a5nGT5fz7I9yuyvsJ/FlwUJdNw/U5k/0nmr5m+McwtWWJksEvArGdw+nyFKXi3jIbjZtG8cUKWSceXYqhKuj/9k="></p>`
    })
})






const port = 5000

app.listen(port)
